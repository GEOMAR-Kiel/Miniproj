image: alpine:latest

stages:
    - build
    - pages   

build:
    script:
        - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y --profile minimal --default-toolchain nightly
        - source $HOME/.cargo/env
        - cargo test --doc
        - cargo doc
        - mv target/doc public
    artifacts:
        paths:
            - public
        expire_in: 5 days

pages:
    script: 
        - ls public
    artifacts:
        paths:
            - public
